<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height" />
    <link rel="stylesheet" type="text/css" href="style.css" />
    <title>StepDub</title>
  </head>
  <body>
    <header>
    <svg class="chart" id="accelgraph" preserveAspectRatio="none" viewBox=""></svg>
    <h1 id="appname">StepDub</h1>
    </header>
    <h2 id="active-label" class="banner">Ninja Clan Foot Stealth</h1>
    <div class="buttons">
      <img class="shoe-button" src="shoes/ninja.svg" onclick="shhhhhh()">
      <img class="shoe-button" src="shoes/spring.svg" onclick="sproing()">
      <img class="shoe-button" src="shoes/gargantuan.svg" onclick="rooooar()">
    </div>
    <footer><a href="about.html">About</a></footer>
    <script type="text/javascript" src="phonegap.js"></script>
    <script type="text/javascript" src="scripts/prep.js"></script>
    <script type="text/javascript" src="scripts/functions.js"></script>
    <script type="text/javascript" src="scripts/charting.js"></script>
    <script>
      /*global magAvgListener stepDubber chartable*/

      "use strict";
      var mal = magAvgListener();
      var chartp = chartable(document.getElementById("accelgraph"),{frameSec:0});
      var stateColors = {
        ready: "green",
        primed: "white",
        rebound: "yellow",
        comedown: "gray"
      };

      function chartState(params){
        chartp(params.mag,'stroke:'+stateColors[params.state]);
      }

      var primedSpring = stepDubber('sounds/boing.mp3',{cb: chartState});
      var primedBoom = stepDubber('sounds/boom.mp3',{cb: chartState});

      function shhhhhh(){
        document.getElementById("active-label").textContent = "Ninja Clan Foot Stealth";
        mal.setCb(function(mag){chartp(mag,"stroke: gray")});
      }
      function sproing(){
        document.getElementById("active-label").textContent = "Spring In Your Step";
        mal.setCb(primedSpring);
      }
      function rooooar(){
        document.getElementById("active-label").textContent = "Big Boom";
        mal.setCb(primedBoom);
      }
    </script>
  </body>
</html>
